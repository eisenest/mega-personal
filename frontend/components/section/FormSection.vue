<template>
  <section class="container white form" id="form">
    <div class="form__container">
      <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å -->
      <div class="form__info">
        <div class="form__info-top">
          <div class="tabs">
            <template v-if="fixedTab !== null">
              <button class="active" disabled>
                {{ tabs[fixedTab] }}
              </button>
            </template>
            <template v-else>
              <button
                  v-for="(tab, i) in tabs"
                  :key="i"
                  :class="{ active: activeTab === i }"
                  @click="activeTab = i"
              >
                {{ tab }}
              </button>
            </template>
          </div>
          <h3>
            {{ tabHeadlines[activeTab].text }}<span class="highlight">{{ tabHeadlines[activeTab].highlight }}</span>
          </h3>
        </div>
        <div class="form__info-bottom">
          <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, –∏ –Ω–∞—à —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.</p>
        </div>
      </div>

      <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
      <form class="form__box">
        <template v-if="activeTab === 0">
          <div class="form__row">
            <input placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" />
            <input placeholder="email" />
          </div>
          <div class="form__row">
            <input placeholder="–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è" />
            <input placeholder="–ì–æ—Ä–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞" />
          </div>
          <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
        </template>

        <template v-else-if="activeTab === 1">
          <input placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è" />
          <div class="form__row">
            <input placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" />
            <input placeholder="–ì–æ—Ä–æ–¥" />
          </div>
        </template>

        <template v-else>
          <input placeholder="–ò–º—è, –§–∞–º–∏–ª–∏—è, –û—Ç—á–µ—Å—Ç–≤–æ" />
          <div class="form__row">
            <input placeholder="–ü–æ—á—Ç–∞" />
            <input type="date" placeholder="–î–∞—Ç–∞ –†–æ–∂–¥–µ–Ω–∏—è" />
          </div>
          <div class="form__row">
            <input placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" />
            <DropdownSelect v-model="entityType" placeholder="–¢–∏–ø —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –ª–∏—Ü–∞" :options="['–ò–ü', '–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π']" />
          </div>
          <div class="form__row">
            <input placeholder="–°–µ—Ä–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞" />
            <input placeholder="–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞" />
          </div>
          <div class="form__row">
            <input placeholder="–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞" />
            <input placeholder="–ë–ò–ö –±–∞–Ω–∫–∞" />
          </div>
          <div class="form__row">
            <input placeholder="–ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á–µ—Ç" />
            <input placeholder="–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç" />
          </div>
          <div class="form__row" v-if="entityType === '–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π'">
            <input placeholder="–ê–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏" />
            <input placeholder="–ò–ù–ù –±–∞–Ω–∫–∞" />
          </div>
          <div class="form__row" v-else-if="entityType === '–ò–ü'">
            <input placeholder="–ò–ù–ù" />
            <input placeholder="–ö–ü–ü" />
          </div>
          <div class="form__row" v-if="entityType === '–ò–ü'">
            <input placeholder="–û–†–ì–ù" />
            <input placeholder="–ê–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏" />
          </div>

          <div class="upload-links">
            <p v-if="entityType === '–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π'" >üìé –°–ø—Ä–∞–≤–∫–∞ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–≥–æ –æ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞ —É—á–µ—Ç</p>
            <p v-else-if="entityType === '–ò–ü'">üìé –õ–∏—Å—Ç –∑–∞–ø–∏—Å–∏ –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ò–ü</p>
            <p>üìé –°–∫–∞–Ω –ø–∞—Å–ø–æ—Ä—Ç–∞ (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞)</p>
            <p>üìé –°–∫–∞–Ω –ø–∞—Å–ø–æ—Ä—Ç–∞ (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)</p>
          </div>
        </template>

        <label class="checkbox">
          <input type="checkbox" required />
          <span>–í—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</span>
        </label>

        <button type="submit">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
      </form>
    </div>
  </section>
</template>

<script setup>
import { ref, watch } from 'vue'
import { useRoute } from 'vue-router'
import DropdownSelect from "~/components/elements/DropdownSelect.vue";

const { fixedTab } = defineProps({
  fixedTab: {
    type: Number,
    default: null
  }
})

const entityType = ref('')
const tabs = ['–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è–º', '–°–æ–∏—Å–∫–∞—Ç–µ–ª—è–º', '–§—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞–º-—Ä–µ–∫—Ä—É—Ç–µ—Ä–∞–º']
const activeTab = ref(1) // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const route = useRoute()

const setTabFromRoute = () => {
  const tab = Number(route.query.tab)
  if (!isNaN(tab)) {
    activeTab.value = tab
  }
}

// –°–ª–µ–¥–∏–º –∑–∞ —Ç–∞–±–æ–º –≤ query —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ fixedTab –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω
watch(
    () => route.query.tab,
    () => {
      if (fixedTab === null) {
        setTabFromRoute()
      }
    },
    { immediate: true }
)


const tabHeadlines = [
  {
    text: '–ú—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º –Ω–∞–π—Ç–∏ ',
    highlight: '—Ä–∞–±–æ—Ç—É!'
  },
  {
    text: '–û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É ‚Äî –º—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º ',
    highlight: '–Ω–∞–π—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤!'
  },
  {
    text: '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–µ–π –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ ‚Äî –ø–æ–ª—É—á–∞–π—Ç–µ ',
    highlight: '–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Ö–æ–¥ –∑–∞ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤'
  }
]


</script>

<style scoped>
#form{
  scroll-margin-top: 150px;
}


.upload-links p{
  color: #fff;
}


</style>
